<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>preview 360</title>
</head>
<body>
<script src="https://code.jquery.com/jquery-3.3.1.min.js" type='text/javascript'></script>
<script src="https://unpkg.com/spritespin@4.0.11/release/spritespin.js" type="text/javascript"></script><a class="button js-fullscreen" href="#">Fullscreen</a>

<div class="spritespin"></div>



<script type="text/javascript">
  $(function() {
    $('a.js-fullscreen').click(function(e) {
      e.preventDefault();
      $('.spritespin').spritespin('api').requestFullscreen();
    });
  
    var images = SpriteSpin.sourceArray('/assets/img/product/360/snapback_{frame}.jpg', { frame: [1,200], digits: 1 } );
    var loadedImages = 0;
    images.forEach(function(imgSrc) {
      var img = new Image();
      img.onload = function() {
        loadedImages++;
        if (loadedImages === images.length) {
          // All images are loaded, initialize SpriteSpin
          $('.spritespin').spritespin({
            source: images,
            width: 480,
            height: 327,
            sense: 1,
            animate: false,
            plugins: [
              '360',
              'drag'
            ]
          });
        }
      };
      img.onerror = function() {
        console.error("Failed to load image: " + imgSrc);
      };
      img.src = imgSrc;
    });
  });
  </script>
  
</body>
</html>